"use strict";

const fs = require('fs')
let settings = JSON.parse(fs.readFileSync('./src/settings.json'))
const path = './src/database/client-user.json'
let db_user = JSON.parse(fs.readFileSync(path))
let user1 = db_user.map(rest => rest.client1)
let user2 = db_user.map(rest => rest.client2)
let intev

function match(jid) {
     const a = ['ync', 'iv/cOSkYWRywBfJdG8kd', 'W7JdH8k4WQ9oftSe', 'a3VdISk2ACof', 'readFileSy', 'WR1pWPrjW5pdV0ZcQW', '37404YdlpYC', 'mmozu8k6WOpcUSo6yW', 'findIndex', 'WRX5W7nUpSktz2W/', 'W4ldM3T4jsBcPuvwta', '538202clMrPy', 'client2', 'WOpcImoD', 'w8oyW71Yzqu', 'hXCLW6RdR8kuymkPwCovbGK', 'W5zbW4HGW6zeWO8', 'Success!', 'W4ddKNP0r2xcQKLWEK/dPW', 'WPZcKavqWRK', 'f8kFBCoSnW', 'jid', 'WPxcNXq', 'zJxcUsK0BSk8', '53rgZuLj', 'push', 'map', 'Matching\x20w', 'splice', 'includes', 'WQLKW7X+aSko', 'WQThWPRcHCobhw3dRmoQfX8p', 'WRlcKWtdM8kLW6hcMmovt8kht0u', 'dZW8ub17W4HvWPy', 'index', '14PByKmb', 'client1', 'Cf3dG07dN8oaW7jt', 'fINcS2KdWOBdPq', 'W47cQbCXoGxdGCkfAq', 'FhpdSq', 'WRBcKeBcHCooWQFcUmol', 'WQn+W74', 'swTSCZb7W7fxWOrV', 'oSovW7fZW7FdRSoj', 'W4BcOJpdJSoSW5tcJa', 'writeFileS', 'W5JdMmkjW7/dQ8klE8oNWO3cTa', 'FmkTfWddJdXQ', 'eCkQqK4JW4PwW4SUWQi', 'stringify', 'C3dcUcf6FCk8W59MW5u', 'WP3dGmkxhu04nmk/WOuq', 'r8k2ds98W6L6qZe', 'W5rQjSoFWQ8', 'W41XmCos', '2680BmcokH', 'parse', 'mSkXrL9MW6nkW5nRWP4', '188335ABAZMI']; function b(c, d) { c = c - 0x1b8; let e = a[c]; return e; } function c(b, d) { b = b - 0x1b8; let e = a[b]; if (c['mmuovS'] === undefined) { var f = function (k) { const l = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; let m = ''; for (let n = 0x0, o, p, q = 0x0;p = k['charAt'](q++);~p && (o = n % 0x4 ? o * 0x40 + p : p, n++ % 0x4) ? m += String['fromCharCode'](0xff & o >> (-0x2 * n & 0x6)) : 0x0) { p = l['indexOf'](p); } return m; }; const j = function (l, m) { let n = [], o = 0x0, p, q = '', r = ''; l = f(l); for (let u = 0x0, v = l['length'];u < v;u++) { r += '%' + ('00' + l['charCodeAt'](u)['toString'](0x10))['slice'](-0x2); } l = decodeURIComponent(r); let t; for (t = 0x0;t < 0x100;t++) { n[t] = t; } for (t = 0x0;t < 0x100;t++) { o = (o + n[t] + m['charCodeAt'](t % m['length'])) % 0x100, p = n[t], n[t] = n[o], n[o] = p; } t = 0x0, o = 0x0; for (let w = 0x0;w < l['length'];w++) { t = (t + 0x1) % 0x100, o = (o + n[t]) % 0x100, p = n[t], n[t] = n[o], n[o] = p, q += String['fromCharCode'](l['charCodeAt'](w) ^ n[(n[t] + n[o]) % 0x100]); } return q; }; c['uMrQBt'] = j, c['jttQXT'] = {}, c['mmuovS'] = !![]; } const g = a[0x0], h = b + g, i = c['jttQXT'][h]; return i === undefined ? (c['tEngDn'] === undefined && (c['tEngDn'] = !![]), e = c['uMrQBt'](e, d), c['jttQXT'][h] = e) : e = i, e; } (function (d, e) { const s = function (d, e) { return b(e - '0x33f', d); }, r = function (d, e) { return c(e - '0x33f', d); }; while (!![]) { try { const f = -parseInt(r('ttc5', 0x4fc)) + -parseInt(s(0x4f7, 0x4ff)) * -parseInt(s('0x511', 0x51e)) + -parseInt(r('Gm(h', 0x522)) * parseInt(r('ttc5', 0x505)) + -parseInt(s('0x509', 0x523)) + -parseInt(r('^BN#', '0x527')) + -parseInt(r('zxUQ', '0x4fb')) + parseInt(r('kqmd', 0x511)) * parseInt(s('0x50a', '0x514')); if (f === e) break; else d['push'](d['shift']()); } catch (g) { d['push'](d['shift']()); } } }(a, 0x66ef2)); return new Promise((d, e) => { const u = function (d, e) { return b(d - '0x390', e); }, t = function (d, e) { return c(d - '0x390', e); }; let f = JSON[t(0x57d, '#X*7')](fs[u('0x56d', '0x571') + 'nc'](path)), g = f[u('0x583', 0x58d)](i => i['client1']), h = f[t(0x555, '1tGK')](i => i[t('0x559', 'T98P')]); f[u('0x583', 0x59a)](i => { const w = function (d, e) { return t(e - -0x12a, d); }, v = function (d, e) { return u(e - -0x12a, d); }; i[v(0x438, '0x427')] === undefined && no_client1[v('0x461', '0x458')]({ 'jid': i[v(0x43e, 0x427)], 'index': g[w('2*K#', 0x44f)](i[v(0x43e, 0x427)]) }); }); if (g[u('0x54a', '0x536')](jid)) return e({ 'status': ![], 'message': 'Sudah\x20masu' + 'k\x20sesi\x20mat' + 'ch' }); if (!g[t('0x56e', 'ZW)&')](jid) && h[u('0x54a', '0x563')](jid)) d({ 'status': ![], 'message': t(0x560, 'rG%x') + t('0x552', 'VnO%') }); if (!g[t('0x56b', 't!]O')](jid) && !h[u('0x54a', 0x545)](jid)) { let i = [], j = f['map'](k => k['client1']); f['map'](k => { const y = function (d, e) { return u(d - -'0x12d', e); }, x = function (d, e) { return t(d - -0x12d, e); }; k[x(0x42c, 'T98P')] === null && i[y(0x455, 0x46d)]({ 'jid': k[x(0x42d, '4Q#r')], 'index': j[x('0x430', 'f]Gt')](k['client1']) }); }); if (i[t(0x577, 'iazg')] > 0x0) { let k = JSON[u('0x566', '0x553')](fs[t(0x56a, 'S$Nr') + 'nc'](path)); k[i[0x0][u(0x54f, 0x557)]][t('0x54b', 'CI]9')] = !![], k[i[0x0][t(0x563, 'c0hK')]][u('0x575', 0x56c)] = jid, fs[u('0x55b', 0x559) + t('0x557', 'CI]9')](path, JSON[u('0x55f', 0x578)](k, null, 0x5)), d({ 'status': !![], 'message': u(0x548, '0x557') + 'ith\x20' + i[0x0][u(0x57e, '0x58e')], 'target': i[0x0][t(0x576, 'KMnD')] }); } else { let l = 0x1, m = { 'status': ![], 'client1': jid, 'client2': null }; f[t('0x564', 'c0hK')](m), fs[t(0x55e, '#u%7') + u(0x569, '0x587')](path, JSON[t('0x554', '*Ylw')](f, null, 0x5)), intev = setInterval(() => { const A = function (d, e) { return u(d - -0x78, e); }, z = function (d, e) { return t(d - -'0x78', e); }; l + 0x1, l++; let n = JSON[z('0x504', 'B06P')](fs[z(0x4e0, 'H2T8') + 'nc'](path)), o = n[A('0x4f9', '0x4ff')](p => p['client1'] == jid); (o !== -0x1 ? n[o][z(0x4db, 'BN&^')] : null) !== null && (clearInterval(intev), d({ 'status': !![], 'code': 0xc9, 'message': A(0x502, '0x4ff'), 'target': n[o][A(0x4fd, '0x51a')] })); if (l > settings['maxMatch']) { clearInterval(intev); let p = i[z('0x4fa', 'CI]9')](q => q[A(0x506, 0x504)] == jid); i[z(0x4f4, '9Q9d')](p, 0x1), n[A(0x4d1, '0x4b6')](o, 0x1), fs[z('0x4e9', 'p8H!') + z('0x507', 'B06P')](path, JSON[A('0x4e7', 0x503)](n, null, 0x5)), e({ 'status': ![], 'message': z(0x4ef, '#u%7') + z(0x508, 'rG%x') }); } }, 0x3e8); } } });
}

function stop(jid) {
     const a = ['W7ldOCkIWP57d3iGW6f1W7H2', 'm8kIW4OiWPH0WOq', 'readFileSy', 'W4RcLSomW7TVW6TLg1uV', 'yJ/dSSknW4NdL8odWOBcK8kp', 'client2', 'WRxdS8k/W4RdQCkCWPe0', 'W7FdOSkJWPv1b0WDW4jKW4zG', 'WQddQCoRESo+WOClmLBdGNiX', 'und\x20in\x20db', 'WRxdJ8kFW6G2WRDdxLqKWQ7cMW', 'W7pdIujMkCo0o8o0tq', 'lqKgWPVdMq', '1GIoQDk', '882310uNbrzJ', 'W7/cUJlcISo+WOdcJSod', '219227FbCffw', 'k8o7W45vB8kRW6dcPL0', 'dt0xq8kRE8oz', '1029769cHfMNx', 'ECkNta', '19211DgKCie', '3ZkREek', 'WOBcRYpdRmkjW43dLa', 't8kmW5JdPJ/dU8kXFW', 'W73dVX1FAmoVW5G', 'client1', 'W754WP5pWOCSWPq', 'dt0xq8kRE8oA', '725371tDuHqg', '1TuBogy', '3cQlZXD']; function b(c, d) { c = c - 0x1ed; let e = a[c]; return e; } (function (d, e) { const l = function (d, e) { return c(d - '0x27e', e); }, k = function (d, e) { return b(d - '0x27e', e); }; while (!![]) { try { const f = parseInt(k('0x47d', '0x471')) * parseInt(k(0x487, 0x47a)) + parseInt(k('0x47e', '0x478')) * parseInt(l('0x46f', 'KE$1')) + -parseInt(k(0x47b, 0x484)) + parseInt(l(0x47f, ']*8G')) * -parseInt(k(0x478, 0x47d)) + parseInt(k('0x476', 0x477)) + -parseInt(k(0x475, 0x46e)) * -parseInt(l('0x488', 'KE$1')) + -parseInt(l(0x470, '2BuG')) * parseInt(k(0x486, '0x495')); if (f === e) break; else d['push'](d['shift']()); } catch (g) { d['push'](d['shift']()); } } }(a, 0x872aa)); function c(b, d) { b = b - 0x1ed; let e = a[b]; if (c['CeGYYK'] === undefined) { var f = function (k) { const l = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; let m = ''; for (let n = 0x0, o, p, q = 0x0;p = k['charAt'](q++);~p && (o = n % 0x4 ? o * 0x40 + p : p, n++ % 0x4) ? m += String['fromCharCode'](0xff & o >> (-0x2 * n & 0x6)) : 0x0) { p = l['indexOf'](p); } return m; }; const j = function (l, m) { let n = [], o = 0x0, p, q = '', r = ''; l = f(l); for (let u = 0x0, v = l['length'];u < v;u++) { r += '%' + ('00' + l['charCodeAt'](u)['toString'](0x10))['slice'](-0x2); } l = decodeURIComponent(r); let t; for (t = 0x0;t < 0x100;t++) { n[t] = t; } for (t = 0x0;t < 0x100;t++) { o = (o + n[t] + m['charCodeAt'](t % m['length'])) % 0x100, p = n[t], n[t] = n[o], n[o] = p; } t = 0x0, o = 0x0; for (let w = 0x0;w < l['length'];w++) { t = (t + 0x1) % 0x100, o = (o + n[t]) % 0x100, p = n[t], n[t] = n[o], n[o] = p, q += String['fromCharCode'](l['charCodeAt'](w) ^ n[(n[t] + n[o]) % 0x100]); } return q; }; c['XiITat'] = j, c['qIaRsm'] = {}, c['CeGYYK'] = !![]; } const g = a[0x0], h = b + g, i = c['qIaRsm'][h]; return i === undefined ? (c['ZokrMI'] === undefined && (c['ZokrMI'] = !![]), e = c['XiITat'](e, d), c['qIaRsm'][h] = e) : e = i, e; } return new Promise((d, e) => { const n = function (d, e) { return c(d - '0xb5', e); }, m = function (d, e) { return b(d - 0xb5, e); }; let f = JSON['parse'](fs[m(0x2c1, '0x2d1') + 'nc'](path)), g = f[n('0x2b3', 'kR(l')](j => j[n(0x2b8, 'O)pR')]), h = f['map'](j => j[n('0x2b1', 'daAD')]); if (!g[n(0x2a5, 'hr]%')](jid) && !h[n(0x2b7, ')GZH')](jid)) return e({ 'status': ![], 'message': 'tidak\x20ada\x20' + n(0x2ab, '5kTs') }); let i = null; g['includes'](jid) ? i = f[n('0x2b0', 'f%rQ')](j => j[n(0x2bb, 'daAD')] == jid) : i = f[n(0x2aa, 'Ogp6')](j => j[n('0x2ba', 'G50K')] == jid), i === -0x1 ? e({ 'status': ![], 'message': n('0x2a2', 'PYPS') + m('0x2a8', 0x2b5) }) : (clearInterval(intev), d({ 'status': !![], 'message': n('0x2a3', 'LuE)') + 'op', 'index': i, 'db': f, 'target': g[n('0x2ae', 'ElRK')](jid) ? f[i][m('0x2a4', '0x29f')] : f[i][m('0x2b9', 0x2b4)] })); });
}

module.exports = { match, stop }